(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{89343:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pantry",function(){return t(18428)}])},18428:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Pantry}});var r=t(85893),a=t(67294),i=t(84053),l=t(69417),s=t(55843),o=t(5616),d=t(14510),u=t(41733),c=t(80940),h=t(7906),g=t(295),_=t(53252),v=t(72882),x=t(53184),j=t(53816),p=t(90629);function Pantry(){var e,n;let[t,m]=a.useState([]),[f,Z]=a.useState(""),[b,C]=a.useState(),[S,y]=a.useState(),[q,w]=a.useState(),[I,N]=a.useState(),[W,k]=a.useState(),[T,E]=a.useState(),[P,D]=a.useState(),[F,M]=a.useState(),[O,Q]=a.useState(),[U,X]=a.useState(),z=(0,i.useSupabaseClient)(),[A,B]=a.useState(!1),[L,Y]=a.useState(!1),[G,H]=a.useState((n=9999,e=Math.ceil(e=1),Math.floor(Math.random()*((n=Math.floor(n))-e+1))+e));z.auth.getUser().then(e=>{try{X(e.data.user.id)}catch(e){}});let upsertIngredient=async e=>{e.preventDefault();try{let{data:e}=await z.from("Ingredients").upsert([{ing_id:G,ing_name:f,ing_qnt:b,ing_threshold_qnt:S,ing_serv_qnt:q,ing_serv_cal:I,ing_serv_prot:W,ing_serv_fat:T,ing_serv_carb:P,ing_purchase_serv_cnt:F,ing_purchase_cost:O,user_id:U}]);return e}catch(e){console.error(e)}};(0,a.useEffect)(()=>{let readIngredient=async()=>{try{let e=await z.from("Ingredients").select("ing_id, ing_name, ing_qnt"),n=e.data;m(n),console.log(await z.auth.getUser())}catch(e){console.error(e)}};readIngredient()},[]);let deleteIngredient=async e=>{try{let n=await z.from("Ingredients").delete().match({ing_id:e});console.log(n.data),m(t.filter(n=>n.ing_id!==e))}catch(e){console.error(e)}};return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"centered",children:(0,r.jsx)(l.Z,{variant:"contained",color:"primary",onClick:()=>B(!0),id:"addButton",children:"Add New Ingredient"})}),(0,r.jsx)("div",{className:"centered",children:(0,r.jsx)("h3",{children:"Your Ingredients"})}),(0,r.jsx)(s.Z,{open:A,onClose:()=>B(!1),children:(0,r.jsx)(o.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4},children:(0,r.jsxs)("form",{onSubmit:upsertIngredient,children:[(0,r.jsx)("h3",{children:"Input Food Data"}),(0,r.jsx)(d.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Name",value:f,onChange:e=>Z(e.target.value)}),(0,r.jsx)(d.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Quantity",value:b,onChange:e=>C(e.target.value)}),(0,r.jsx)(d.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Threshold",value:S,onChange:e=>y(e.target.value)}),(0,r.jsx)(d.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Serving Size",value:q,onChange:e=>w(e.target.value)}),(0,r.jsx)(d.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Calories",value:I,onChange:e=>N(e.target.value)}),(0,r.jsx)(d.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Protein",value:W,onChange:e=>k(e.target.value)}),(0,r.jsx)(d.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Fat",value:T,onChange:e=>E(e.target.value)}),(0,r.jsx)(d.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Carbohydrate",value:P,onChange:e=>D(e.target.value)}),(0,r.jsx)(d.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Purchased Servings",value:F,onChange:e=>M(e.target.value)}),(0,r.jsx)(d.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Cost",value:O,onChange:e=>Q(e.target.value)}),(0,r.jsx)(l.Z,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",children:"Submit"})]})})}),(0,r.jsx)("div",{sx:{overflow:"auto"},children:(0,r.jsx)("div",{sx:{width:"100%",display:"table",tableLayout:"fixed"},children:(0,r.jsx)(v.Z,{component:p.Z,children:(0,r.jsxs)(h.Z,{"aria-label":"simple table",children:[(0,r.jsx)(x.Z,{children:(0,r.jsxs)(j.Z,{children:[(0,r.jsx)(_.Z,{children:"Ingredient"}),(0,r.jsx)(_.Z,{align:"right",children:"Quantity"}),(0,r.jsx)(_.Z,{children:"Nutrition Facts"}),(0,r.jsx)(_.Z,{align:"right",children:"Edit"}),(0,r.jsx)(_.Z,{align:"right",children:"Delete"})]})}),(0,r.jsx)(g.Z,{children:t.map(e=>(0,r.jsxs)(j.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,r.jsxs)(_.Z,{component:"th",scope:"row",children:[e.ing_id,": ",e.ing_name]}),(0,r.jsx)(_.Z,{align:"right",children:e.ing_qnt}),(0,r.jsx)(_.Z,{align:"right",children:(0,r.jsx)(l.Z,{onClick:()=>{Y(!0),N(e.ing_serv_cal),k(e.ing_serv_prot),E(e.ing_serv_fat),D(e.ing_serv_carb),M(e.ing_purchase_serv_cnt),Q(e.ing_purchase_cost)},children:"Nutrition"})}),(0,r.jsx)(_.Z,{align:"right",children:(0,r.jsx)(l.Z,{color:"info",onClick:()=>{B(!0),Z(e.ing_name),C(e.ing_qnt),y(e.ing_threshold_qnt),w(e.ing_serv_qnt),N(e.ing_serv_cal),k(e.ing_serv_prot),E(e.ing_serv_fat),D(e.ing_serv_carb),M(e.ing_purchase_serv_cnt),Q(e.ing_purchase_cost),H(e.ing_id)},children:(0,r.jsx)(c.Z,{})})}),(0,r.jsx)(_.Z,{align:"right",children:(0,r.jsx)(l.Z,{color:"error",onClick:()=>deleteIngredient(e.ing_id),children:(0,r.jsx)(u.Z,{})})})]},e.ing_id))})]})})})}),(0,r.jsx)(s.Z,{open:L,onClose:()=>Y(!1),children:(0,r.jsxs)(o.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4},children:[(0,r.jsx)("h3",{children:"Nutrition Data"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:["Total Protein: ",W]}),(0,r.jsxs)("p",{children:["Total Fat: ",T]}),(0,r.jsxs)("p",{children:["Total Carbohydrate: ",P]}),(0,r.jsxs)("p",{children:["Total Calories: ",I]}),(0,r.jsxs)("p",{children:["Total Cost: ",O]})]})]})})]})}}},function(e){e.O(0,[756,510,754,774,888,179],function(){return e(e.s=89343)}),_N_E=e.O()}]);