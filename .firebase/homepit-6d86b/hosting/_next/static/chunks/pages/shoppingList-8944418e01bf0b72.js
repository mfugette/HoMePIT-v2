(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{86747:function(t,e,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shoppingList",function(){return i(51035)}])},51035:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return ShoppingList}});var n=i(85893),s=i(67294),r=i(84053),a=i(69417),l=i(11994),d=i(5616),o=i(10586),c=i(50720),h=i(78835),u=i(41733),p=i(7906),g=i(295),_=i(53252),x=i(72882),j=i(53184),f=i(53816),S=i(90629);function ShoppingList(){let[t,e]=s.useState([]),[i,m]=s.useState([]),[Z,b]=s.useState(),[L,w]=s.useState(),[y,v]=s.useState(),[E,k]=s.useState(),[C,D]=s.useState(!1),[N,q]=s.useState(!1),I=(0,r.useSupabaseClient)();I.auth.getUser().then(t=>{try{k(t.data.user.id)}catch(t){}});let upsertShoppingList=async t=>{t.preventDefault();try{let{data:t}=await I.from("Shopping Lists").upsert([{list_start_date:L,list_end_date:y,user_id:E}]);return t}catch(t){console.error(t)}};(0,s.useEffect)(()=>{let readShoppingLists=async()=>{try{let t=await I.from("Shopping Lists").select("list_id, list_start_date, list_end_date"),e=t.data;m(e),console.log(await I.auth.getUser())}catch(t){console.error(t)}};readShoppingLists()},[]);let deleteShoppingList=async t=>{try{let e=await I.from("Shopping Lists").delete().match({list_id:t});console.log(e.data),m(i.filter(e=>e.list_id!==t))}catch(t){console.error(t)}};return(0,s.useEffect)(()=>{let readIngredient=async()=>{try{let t=await I.from("Ingredients").select("ing_id, ing_name, ing_qnt, ing_threshold_qnt").lte("ing_qnt",7),i=t.data;e(i)}catch(t){console.error(t)}};readIngredient()},[]),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"centered",children:(0,n.jsx)(a.Z,{variant:"contained",color:"primary",onClick:()=>D(!0),id:"addButton",children:"Add New Shopping List"})}),(0,n.jsx)("div",{className:"centered",children:(0,n.jsx)("h3",{children:"Your Shopping Lists"})}),(0,n.jsx)(l.Z,{open:C,onClose:()=>D(!1),children:(0,n.jsx)(d.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4},children:(0,n.jsxs)("form",{onSubmit:upsertShoppingList,children:[(0,n.jsx)("h3",{children:"Enter List Data"}),(0,n.jsxs)(c._,{dateAdapter:o.y,children:[(0,n.jsx)(h.M,{label:"List Start Date",variant:"outlined",margin:"normal",fullWidth:!0,required:!0,selected:L,onChange:t=>w(t)}),(0,n.jsx)(h.M,{label:"List End Date",variant:"outlined",margin:"normal",fullWidth:!0,required:!0,selected:y,onChange:t=>v(t)})]}),(0,n.jsx)(a.Z,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",children:"Submit"})]})})}),(0,n.jsx)("div",{sx:{overflow:"auto"},children:(0,n.jsx)("div",{sx:{width:"100%",display:"table",tableLayout:"fixed"},children:(0,n.jsx)(x.Z,{component:S.Z,children:(0,n.jsxs)(p.Z,{"aria-label":"simple table",children:[(0,n.jsx)(j.Z,{children:(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(_.Z,{children:"List ID"}),(0,n.jsx)(_.Z,{align:"right",children:"Start Date"}),(0,n.jsx)(_.Z,{align:"right",children:"End Date"}),(0,n.jsx)(_.Z,{align:"right",children:"Delete"})]})}),(0,n.jsx)(g.Z,{children:i.map(t=>(0,n.jsxs)(f.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,n.jsx)(_.Z,{component:"th",scope:"row",children:t.list_id}),(0,n.jsx)(_.Z,{align:"right",children:t.list_start_date}),(0,n.jsx)(_.Z,{align:"right",children:t.list_end_date}),(0,n.jsx)(_.Z,{align:"right",children:(0,n.jsx)(a.Z,{color:"error",onClick:()=>deleteShoppingList(t.list_id),children:(0,n.jsx)(u.Z,{})})})]},t.list_id))})]})})})})]})}(0,i(90948).ZP)("div")(t=>{let{theme:e}=t;return{backgroundColor:e.palette.background.paper}})}},function(t){t.O(0,[754,510,188,296,835,774,888,179],function(){return t(t.s=86747)}),_N_E=t.O()}]);