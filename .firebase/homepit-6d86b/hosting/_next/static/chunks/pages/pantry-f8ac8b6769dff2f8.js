(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{9343:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pantry",function(){return n(8428)}])},8428:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Pantry}});var a=n(5893),r=n(7294),i=n(4053),l=n(2345);function Pantry(){let[e,t]=r.useState([]),[n,s]=r.useState(""),[u,o]=r.useState(),[d,h]=r.useState(),[c,g]=r.useState(),[p,x]=r.useState(),[v,_]=r.useState(),[j,y]=r.useState(),[C,m]=r.useState(),[f,S]=r.useState(),[b,I]=r.useState(),[w,N]=r.useState(),q=(0,i.useSupabaseClient)();q.auth.getUser().then(e=>{try{N(e.data.user.id)}catch(e){}});let createIngredient=async e=>{e.preventDefault();try{let{data:e}=await q.from("Ingredients").insert([{ing_name:n,ing_qnt:u,ing_threshold_qnt:d,ing_serv_qnt:c,ing_serv_cal:p,ing_serv_prot:v,ing_serv_fat:j,ing_serv_carb:C,ing_purchase_serv_cnt:f,ing_purchase_cost:b,user_id:w}]);return e}catch(e){console.error(e)}},updateIngredient=async e=>{e.preventDefault();try{let{data:e}=await q.from("Ingredients").update([{ing_name:n,ing_qnt:u,ing_threshold_qnt:d,ing_serv_qnt:c,ing_serv_cal:p,ing_serv_prot:v,ing_serv_fat:j,ing_serv_carb:C,ing_purchase_serv_cnt:f,ing_purchase_cost:b,user_id:w}]).select();return e}catch(e){console.error(e)}};(0,r.useEffect)(()=>{let readIngredient=async()=>{try{let e=await q.from("Ingredients").select("ing_id, ing_name, ing_qnt"),n=e.data;t(n),console.log(await q.auth.getUser())}catch(e){console.error(e)}};readIngredient()},[]);let deleteIngredient=async e=>{try{let n=await q.from("Ingredients").delete().eq("ing_id",e),a=n.data;t(a),location.reload()}catch(e){console.error(e)}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l.Z,{trigger:(0,a.jsx)("button",{className:"",children:"Add New Ingredient"}),position:"bottom right",children:(0,a.jsxs)("form",{onSubmit:createIngredient,className:"add",children:[(0,a.jsx)("h3",{children:"Input Food"}),(0,a.jsx)("input",{type:"text",placeholder:"Name",value:n,onChange:e=>s(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Quantity",value:u,onChange:e=>o(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Threshold",value:d,onChange:e=>h(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Serving Size",value:c,onChange:e=>g(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Calories",value:p,onChange:e=>x(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Protein",value:v,onChange:e=>_(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Fat",value:j,onChange:e=>y(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Carbohydrate",value:C,onChange:e=>m(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Purchased Servings",value:f,onChange:e=>S(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Cost",value:b,onChange:e=>I(e.target.value)}),(0,a.jsx)("button",{type:"submit",children:"Add Ingredient"})]})}),(0,a.jsx)("h3",{children:"Your Ingredients:"})]}),(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Name"}),(0,a.jsx)("th",{children:"Quantity"}),(0,a.jsx)("th",{children:"Actions"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.ing_name}),(0,a.jsx)("td",{children:e.ing_qnt}),(0,a.jsxs)("td",{children:[(0,a.jsx)(l.Z,{trigger:(0,a.jsx)("button",{children:"Edit"}),position:"bottom right",children:(0,a.jsxs)("form",{onSubmit:updateIngredient,className:"edit",children:[(0,a.jsx)("h3",{children:"Edit Food"}),(0,a.jsx)("input",{type:"text",placeholder:"Name",value:n,onChange:e=>s(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Quantity",value:u,onChange:e=>o(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Threshold",value:d,onChange:e=>h(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Serving Size",value:c,onChange:e=>g(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Calories",value:p,onChange:e=>x(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Protein",value:v,onChange:e=>_(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Fat",value:j,onChange:e=>y(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Carbohydrate",value:C,onChange:e=>m(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Purchased Servings",value:f,onChange:e=>S(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Cost",value:b,onChange:e=>I(e.target.value)}),(0,a.jsx)("button",{type:"submit",children:"Edit Ingredient"})]})}),(0,a.jsx)("button",{onClick:()=>deleteIngredient(e.ing_id),children:"Remove"})]})]},e.ing_id))})]})]})})}n(8192)}},function(e){e.O(0,[288,774,888,179],function(){return e(e.s=9343)}),_N_E=e.O()}]);