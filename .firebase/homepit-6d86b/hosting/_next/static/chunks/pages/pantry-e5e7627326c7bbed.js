(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{89343:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pantry",function(){return t(18428)}])},18428:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Pantry}});var r=t(85893),a=t(67294),i=t(84053),l=t(69417),s=t(11994),d=t(2614),o=t(87925),u=t(41733),g=t(80940),h=t(7906),c=t(295),_=t(53252),v=t(72882),x=t(53184),m=t(53816),j=t(90629);function Pantry(){var e,n;let[t,f]=a.useState([]),[Z,p]=a.useState(""),[b,S]=a.useState(),[C,q]=a.useState(),[y,w]=a.useState(),[I,W]=a.useState(),[N,k]=a.useState(),[E,P]=a.useState(),[M,D]=a.useState(),[T,U]=a.useState(),[F,O]=a.useState(),[Q,X]=a.useState(),z=(0,i.useSupabaseClient)(),[A,B]=a.useState(!1),[L,Y]=a.useState(!1),[G,H]=a.useState(!1),[J,K]=a.useState((n=999,e=Math.ceil(e=1),Math.floor(Math.random()*((n=Math.floor(n))-e+1))+e));z.auth.getUser().then(e=>{try{X(e.data.user.id)}catch(e){}});let upsertIngredient=async e=>{e.preventDefault();try{let{data:e}=await z.from("Ingredients").upsert([{ing_id:J,ing_name:Z,ing_qnt:b,ing_threshold_qnt:C,ing_serv_qnt:y,ing_serv_cal:I,ing_serv_prot:N,ing_serv_fat:E,ing_serv_carb:M,ing_purchase_serv_cnt:T,ing_purchase_cost:F,user_id:Q}]);return e}catch(e){console.error(e)}};(0,a.useEffect)(()=>{let readIngredient=async()=>{try{let e=await z.from("Ingredients").select("ing_id, ing_name, ing_qnt"),n=e.data;f(n),console.log(await z.auth.getUser())}catch(e){console.error(e)}};readIngredient()},[]);let deleteIngredient=async e=>{try{let n=await z.from("Ingredients").delete().match({ing_id:e});console.log(n.data),f(t.filter(n=>n.ing_id!==e))}catch(e){console.error(e)}};return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"centered",children:(0,r.jsx)(l.Z,{variant:"contained",color:"primary",onClick:()=>Y(!0),id:"addButton",children:"Add New Ingredient"})}),(0,r.jsx)("div",{className:"centered",children:(0,r.jsx)("h3",{children:"Your Ingredients"})}),(0,r.jsx)(s.Z,{open:L,onClose:()=>Y(!1),children:(0,r.jsx)(d.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4},children:(0,r.jsxs)("form",{onSubmit:upsertIngredient,children:[(0,r.jsx)("h3",{children:"Input Food Data"}),(0,r.jsx)(o.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Name",value:Z,onChange:e=>p(e.target.value)}),(0,r.jsx)(o.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Quantity",value:b,onChange:e=>S(e.target.value)}),(0,r.jsx)(o.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Threshold",value:C,onChange:e=>q(e.target.value)}),(0,r.jsx)(o.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Serving Size",value:y,onChange:e=>w(e.target.value)}),(0,r.jsx)(o.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Calories",value:I,onChange:e=>W(e.target.value)}),(0,r.jsx)(o.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Protein",value:N,onChange:e=>k(e.target.value)}),(0,r.jsx)(o.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Fat",value:E,onChange:e=>P(e.target.value)}),(0,r.jsx)(o.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Carbohydrate",value:M,onChange:e=>D(e.target.value)}),(0,r.jsx)(o.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Purchased Servings",value:T,onChange:e=>U(e.target.value)}),(0,r.jsx)(o.Z,{fullWidth:!0,required:!0,variant:"outlined",margin:"normal",label:"Cost",value:F,onChange:e=>O(e.target.value)}),(0,r.jsx)(l.Z,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",children:"Submit"})]})})}),(0,r.jsx)("div",{sx:{overflow:"auto"},children:(0,r.jsx)("div",{sx:{width:"100%",display:"table",tableLayout:"fixed"},children:(0,r.jsx)(v.Z,{component:j.Z,children:(0,r.jsxs)(h.Z,{"aria-label":"simple table",children:[(0,r.jsx)(x.Z,{children:(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(_.Z,{children:"Ingredient"}),(0,r.jsx)(_.Z,{align:"right",children:"Quantity"}),(0,r.jsx)(_.Z,{children:"Units"}),(0,r.jsx)(_.Z,{align:"right",children:"Edit"}),(0,r.jsx)(_.Z,{align:"right",children:"Delete"})]})}),(0,r.jsx)(c.Z,{children:t.map(e=>(0,r.jsxs)(m.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,r.jsxs)(_.Z,{component:"th",scope:"row",children:[e.ing_id,": ",e.ing_name]}),(0,r.jsx)(_.Z,{align:"right",children:e.ing_qnt}),(0,r.jsx)(_.Z,{align:"right",children:e.ing_serv_cal}),(0,r.jsx)(_.Z,{align:"right",children:(0,r.jsx)(l.Z,{color:"info",onClick:()=>{Y(!0),p(e.ing_name),S(e.ing_qnt),q(e.ing_threshold_qnt),w(e.ing_serv_qnt),W(e.ing_serv_cal),k(e.ing_serv_prot),P(e.ing_serv_fat),D(e.ing_serv_carb),U(e.ing_purchase_serv_cnt),O(e.ing_purchase_cost),K(e.ing_id)},children:(0,r.jsx)(g.Z,{})})}),(0,r.jsx)(_.Z,{align:"right",children:(0,r.jsx)(l.Z,{color:"error",onClick:()=>deleteIngredient(e.ing_id),children:(0,r.jsx)(u.Z,{})})})]},e.ing_id))})]})})})})]})}}},function(e){e.O(0,[925,754,774,888,179],function(){return e(e.s=89343)}),_N_E=e.O()}]);